import { f, h, d, c as c$1, i as i$1, j as j$1, k as k$1, l as l$2, o as o$1, g as g$2, m as m$1, n as n$1 } from './chunk-URNGIKP5.js';
import { e, E, U, f as f$1, v as v$1, x as x$1, m, R, a, u, d as d$1, L as L$1, l, g as g$1, b as b$1, Q as Q$1, O, D as D$1, w as w$1 } from './chunk-SEVK3JXX.js';
import { j, D, z, o, c, w, v, A, F as F$1, p, h as h$1, f as f$2, n, g, C as C$1, t, s, G, M, N, E as E$1, k, e as e$1, J, b, a as a$1, L as L$2, u as u$1, i, l as l$1, K, d as d$2 } from './chunk-OJDYYIWI.js';

function ke(t,e="preconnect"){let r=document.querySelector(`link[href="${t}"]`);if(!o(r))return !0;let n=document.createElement("link");return n.rel=e,n.href=t,n.crossOrigin="true",document.head.append(n),!0}var Re={};function wn(t){if(Re[t])return Re[t].promise;let e=U(),r=document.querySelector(`script[src="${t}"]`);if(!o(r))return e.resolve(),e.promise;let n=document.createElement("script");return n.src=t,n.onload=()=>{e.resolve(),delete Re[t];},n.onerror=()=>{e.reject(),delete Re[t];},setTimeout(()=>document.head.append(n),0),e.promise}var Wr=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,e=>e.nodeValue==="$"),C=null;function Wt(t,e,r){let n=C;C=r.resume&&C?C:{w:Wr(r.target)};let s=e(t,r);return C=n,s}var Xe=Symbol(0),Br=e("$$"),Ze=Symbol(0),zr=e("/$"),Qr="/[]";function Bt(t,e,r){let n=v(e);n&&e[Jt]&&(e=e(),n=v(e)),n?Qt(t,e,r):!C&&(e||e===0)&&zt(t,w(e)?Yt(e):a(e)?e:document.createTextNode(e+""),r);}function zt(t,e,r){!e||(r?t.insertBefore(e,r):t.appendChild(e));}function Qt(t,e,r){let n=r&&r.nodeType===8?r:Br.cloneNode();n!==r&&zt(t,n,r),A(()=>void Yr(n,C$1(e)));}function Yr(t$1,e){let r=t$1[Ze];if(w(e))if(C)t$1[Ze]=Gr(t$1);else {r&&Te(t$1,r);let n=Yt(e);if(!n)return;r||n.appendChild(Je(t$1)),t$1.after(n);}else if(a(e))r&&Te(t$1,r),C||t$1.after(e),r||e.after(Je(t$1));else if(t(e)||s(e)){if(t$1[Xe]){t$1.nextSibling.data=e+"";return}r&&Te(t$1,r);let n;C?n=t$1.nextSibling:(n=document.createTextNode(e+""),t$1.after(n)),t$1[Xe]=!0,r||n.after(Je(t$1));}else r&&Te(t$1,r);}function Je(t){return t[Ze]=zr.cloneNode()}function Gr(t){for(;t;){if(t.nodeType===8&&t.nodeValue===Qr)return t;t=t.nextSibling;}}function Te(t,e){for(;t.nextSibling!==e;)t.nextSibling.remove();t[Xe]=!1;}function Yt(t){let e=u(t);if(!e.length)return null;let r=d$1();for(let n=0;n<e.length;n++){let s=e[n];v(s)?Qt(r,s):r.append(s);}return r}function de(t){let e=document.createElement("template");return e.innerHTML=t,e.content}function fe(t){return t.cloneNode(!0).firstElementChild}function Gt(t){return document.createElement(t)}var Jr=Bt;function Xr(t,e={}){return c(()=>t(e))}var Jt=Symbol(0);function pe(t,e){w(e)?e.filter(v).forEach(r=>r(t)):v(e)&&e(t);}var ie=f$1;function Zr(t,e){v(e)?A(()=>{C||(t.innerHTML=e()+"");}):C||(t.innerHTML=e+"");}function en(t,e,r,n=!1){v(r)&&E(t,e,r,{capture:n});}var oe=A;function Xt(t,e){return Wt(t,et,e)}function et(t,e){return b(r=>(C?C$1(t):Bt(e.target,t()),r))}function Zt(t,e){var r;let n,s;if(t.props){n=new Map,s=new Map;for(let o of Object.keys(t.props)){let a=t.props[o].attribute;if(a!==!1){let c=a??m(o);n.set(c,o),s.set(o,c);}}}return r=class extends rn{},r.c=t,r.s=e,r.f=n,r.B=s,r}var tn=HTMLElement,er,rn=class extends tn{constructor(){super(),this.h=!1,this.b=null,this.j=null,this.e=new Set,this.m=[],this.keepAlive=!1,this[er]=[],this.o=!1,this.constructor.c.construct?.call(this);}get C(){return this.hasAttribute("mk-h")}get n(){return this.hasAttribute("mk-d")}get instance(){return this.b}static get observedAttributes(){return this.f?Array.from(this.f.keys()):[]}attributeChangedCallback(t,e,r){let n=this.constructor;if(!this.b||!n.f)return;let s=n.f.get(t),o=n.c.props[s]?.type?.from;o&&this.b[J]["$"+s].set(o(r));}connectedCallback(){let t=this.b;if(!this.n&&!t)return this.D();!t||!this.isConnected||t.host.$connected()||this.h||(this.hasAttribute("keep-alive")&&(this.keepAlive=!0),t.host[J].$connected.set(!0),e$1(),t[N].length&&g(()=>{b(e=>{this.j=f$2();for(let r of t[N])g(()=>{let n=r();typeof n=="function"&&this.m.push(n);},this.j);this.m.push(e);});},t[a$1]),w(this[N])&&(l(this[N]),this[N]=!0),e$1());}disconnectedCallback(){let t=this.b;if(!(!t?.host.$connected()||this.h)){t.host[J].$connected.set(!1),e$1();for(let e of this.m)g(e,this.j);this.j=null,e$1(),!this.n&&!this.keepAlive&&requestAnimationFrame(()=>{this.isConnected||(t?.destroy(),this.h=!0);});}}attachComponent(t){let e=this.constructor,r=e.c,n=e.s;if(this.b||this.h)return;let s=t[L$2];this.i=s?r.shadowRoot?this.shadowRoot??this.attachShadow(u$1(r.shadowRoot)?{mode:"open"}:r.shadowRoot):nn(this):null,!C&&r.shadowRoot&&r.css&&n?.adoptCSS&&n.adoptCSS(this.i,r.css);let{$attrs:o,$styles:u}=t.host[J];for(let a of Object.keys(o))i(o[a])?l$1(()=>f$1(this,a,o[a]())):f$1(this,a,o[a]);for(let a of Object.keys(u))i(u[a])?l$1(()=>g$1(this,a,u[a]())):g$1(this,a,u[a]);t.host[J].$attrs=null,t.host[J].$styles=null,t[K]&&(Object.defineProperties(this,Object.getOwnPropertyDescriptors(t[K])),t[K]=null),t.host.el=this,this.b=t;for(let a of [...t[M],...this.e])g(a,t[a$1]);this.e=null,this.i&&n&&s&&(this.C?n.hydrate:n.render)(s,{target:this.i,resume:!r.shadowRoot}),e$1(),this.connectedCallback();}onAttach(t){return this.b?(t(),n):(this.e.add(t),()=>this.e?.delete(t))}onEventDispatch(t){let e=this.constructor;if(e.g)for(let r of e.g)t(r);this.t=t;}destroy(){this.disconnectedCallback(),this.b?.destroy(),this.b=null,this.h=!0;}dispatchEvent(t){if(this.n){let e=this.constructor;e.g||(e.g=new Set),e.g.has(t.type)||(this.t?.(t.type),e.g.add(t.type));}return d$2(()=>super.dispatchEvent(t))}async D(){if(this.o)return;this.o=!0;let{setup:t}=await import('./setup-26H4B3HP-MKXCKJWY.js');await t(this),this.o=!1;}};er=N;function nn(t){if(b$1(t.firstChild)&&t.firstChild.localName==="shadow-root")return t.firstChild;{let e=Gt("shadow-root");return t.prepend(e),e}}function tt(t){let e={...t,setup(r){let n=t.setup?.(r)??{};return v(n)?{$render:n}:n}};if("props"in e)for(let r of Object.values(e.props))r.attribute!==!1&&!r.type&&(r.type=sr(r.initial));return e}var we={from:t=>t===null?"":t+""},tr={from:t=>t===null?0:Number(t)},rr={from:t=>t!==null,to:t=>t?"":null},nr={from:!1,to:()=>null},ir={from:t=>t===null?[]:JSON.parse(t),to:t=>JSON.stringify(t)},or={from:t=>t===null?{}:JSON.parse(t),to:t=>JSON.stringify(t)};function sr(t){switch(typeof t){case"undefined":return we;case"string":return we;case"boolean":return rr;case"number":return tr;case"function":return nr;case"object":return w(t)?ir:or;default:return we}}var ar=t=>e=>{let r=G();!r||r[t].push(e);},X=ar(M),Z=ar(N);function sn(t){an(t,{render:et,hydrate:Xt});}function an(t,e){customElements.get(t.tagName)||customElements.define(t.tagName,Zt(t,e));}function me(t){return t instanceof Error?t:Error(JSON.stringify(t))}var lr=ln;function ln(t,e,r){var n=null,s=null,o=r&&r.leading,u=r&&r.trailing;o==null&&(o=!0),u==null&&(u=!o),o==!0&&(u=!1);var a=function(){n&&(clearTimeout(n),n=null);},c=function(){var f=s;a(),f&&f();},h=function(){var f=o&&!n,m=this,M=arguments;if(s=function(){return t.apply(m,M)},n||(n=setTimeout(function(){if(n=null,u)return s()},e)),f)return f=!1,s()};return h.cancel=a,h.flush=c,h}var rt=j(!1);E(document,"pointerdown",()=>{rt.set(!1);}),E(document,"keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||rt.set(!0);});function cr(t){let e=j(!1);return Z(()=>{let r=t();A(()=>{if(!rt()){e.set(!1),Pe(r,!1),E(r,"pointerenter",()=>ur(r,!0)),E(r,"pointerleave",()=>ur(r,!1));return}let n=document.activeElement===r;e.set(n),Pe(r,n),E(r,"focus",()=>{e.set(!0),Pe(r,!0);}),E(r,"blur",()=>{e.set(!1),Pe(r,!1);});});}),e}function Pe(t,e){f$1(t,"data-focus",e),f$1(t,"data-hocus",e);}function ur(t,e){f$1(t,"data-hocus",e);}var nt=D();function dr(){return F$1(nt)}var $e=class{constructor(e){this.se=e;this.$=null;this.P=null;}setTarget(e){this.$=e;}getPlayer(e){return this.P?this.P:((e??this.$)?.dispatchEvent(new v$1("find-media-player",{detail:r=>void(this.P=r),bubbles:!0,composed:!0})),this.P)}setPlayer(e){this.P=e;}startLoading(e){this.M("media-start-loading",e);}play(e){this.M("media-play-request",e);}pause(e){this.M("media-pause-request",e);}mute(e){this.M("media-mute-request",e);}unmute(e){this.M("media-unmute-request",e);}enterFullscreen(e,r){this.M("media-enter-fullscreen-request",r,e);}exitFullscreen(e,r){this.M("media-exit-fullscreen-request",r,e);}seeking(e,r){this.M("media-seeking-request",r,e);}seek(e,r){this.M("media-seek-request",r,e);}seekToLiveEdge(e){this.M("media-live-edge-request",e);}changeVolume(e,r){this.M("media-volume-change-request",r,Math.max(0,Math.min(1,e)));}resumeUserIdle(e){this.M("media-resume-user-idle-request",e);}pauseUserIdle(e){this.M("media-pause-user-idle-request",e);}showPoster(e){this.M("media-show-poster-request",e);}hidePoster(e){this.M("media-hide-poster-request",e);}togglePaused(e){let r=this.getPlayer(e?.target);!r||(r.state.paused?this.play(e):this.pause(e));}toggleMuted(e){let r=this.getPlayer(e?.target);!r||(r.state.muted?this.unmute(e):this.mute(e));}toggleFullscreen(e,r){let n=this.getPlayer(r?.target);!n||(n.state.fullscreen?this.exitFullscreen(e,r):this.enterFullscreen(e,r));}M(e,r,n){let s=new v$1(e,{bubbles:!0,composed:!0,detail:n,trigger:r});(r?.target===document||r?.target===window||r?.target===document.body?this.$??this.getPlayer():r?.target??this.$)?.dispatchEvent(s);}ue(e){}};function fr(t,e,r,n){return r[n][e]||1/0}function it(t){return p(t)||t.length===0?{length:0,start:pr,end:pr}:{length:t.length,start:fr.bind(null,"start",0,t),end:fr.bind(null,"end",1,t)}}function Ce(t,e){return w(t)?it(t):p(t)||p(e)?it():it([[t,e]])}function ot(t){if(!t.length)return null;let e=t.start(0);for(let r=1;r<t.length;r++){let n=t.start(r);n<e&&(e=n);}return e}function st(t){if(!t.length)return null;let e=t.end(0);for(let r=1;r<t.length;r++){let n=t.end(r);n>e&&(e=n);}return e}function pr(){throw new Error("empty")}var at=z({autoplay:!1,autoplayError:void 0,buffered:Ce(),duration:0,canLoad:!1,canFullscreen:!1,canPlay:!1,controls:!1,poster:"",currentTime:0,ended:!1,error:void 0,fullscreen:!1,loop:!1,logLevel:"silent",mediaType:"unknown",muted:!1,paused:!0,played:Ce(),playing:!1,playsinline:!1,preload:"metadata",seekable:Ce(),seeking:!1,source:{src:"",type:""},sources:[],started:!1,volume:1,waiting:!1,get viewType(){return this.providedViewType!=="unknown"?this.providedViewType:this.mediaType},get streamType(){return this.providedStreamType!=="unknown"?this.providedStreamType:this.inferredStreamType},get currentSrc(){return this.source},get bufferedStart(){return ot(this.buffered)??0},get bufferedEnd(){return st(this.buffered)??0},get seekableStart(){return ot(this.seekable)??0},get seekableEnd(){return this.canPlay?st(this.seekable)??1/0:0},get seekableWindow(){return Math.max(0,this.seekableEnd-this.seekableStart)},userIdle:!1,userBehindLiveEdge:!1,liveEdgeTolerance:10,minLiveDVRWindow:60,get canSeek(){return /unknown|on-demand|:dvr/.test(this.streamType)&&Number.isFinite(this.seekableWindow)&&(!this.live||/:dvr/.test(this.streamType)&&this.seekableWindow>=this.minLiveDVRWindow)},get live(){return this.streamType.includes("live")||!Number.isFinite(this.duration)},get liveEdgeStart(){return this.live&&Number.isFinite(this.seekableEnd)?Math.max(0,(this.liveSyncPosition??this.seekableEnd)-this.liveEdgeTolerance):0},get liveEdge(){return this.live&&(!this.canSeek||!this.userBehindLiveEdge&&this.currentTime>=this.liveEdgeStart)},get liveEdgeWindow(){return this.live&&Number.isFinite(this.seekableEnd)?this.seekableEnd-this.liveEdgeStart:0},attemptingAutoplay:!1,canLoadPoster:null,providedViewType:"unknown",providedStreamType:"unknown",inferredStreamType:"unknown",liveSyncPosition:null}),un=new Set(["autoplay","canFullscreen","canLoad","controls","loop","logLevel","muted","playsinline","preload","poster","source","sources","volume","canLoadPoster","providedStreamType","providedViewType"]);function lt(t){at.reset(t,e=>!un.has(e)),e$1();}function mr(t,e={}){let r=j(!1),{skipInitial:n,callback:s,...o}=e,u;return A(()=>{let a=t();if(!a){r.set(!1);return}let c=!0,h=new IntersectionObserver(f=>{if(c&&n){c=!1;return}s?.(f,h),r.set(f[0].isIntersecting);},o);return h.observe(a),u=()=>{h.disconnect(),u=void 0;}}),{get intersecting(){return r()},disconnect(){u?.();}}}function hr(t,e,r){Z(async()=>{let n=e();if(n==="eager")requestAnimationFrame(r);else if(n==="idle"){let{waitIdlePeriod:s}=await import('./std-TQH6CZDI.js');s(r);}else n==="visible"&&b(async s=>{let o=mr(t);A(()=>{o.intersecting&&(r(),s());});});});}function gr({$player:t,$store:e,logger:r},n){let s=(a,...c)=>{n(new v$1(a,c?.[0]));};async function o(a,c$1){c(()=>e.canPlay)||(s("can-play",{detail:a,trigger:c$1}),e$1(),e.canPlay&&e.autoplay&&!e.started&&await u());}async function u(){e.attemptingAutoplay=!0;try{await t().play(),s("autoplay",{detail:{muted:e.muted}});}catch(a){s("autoplay-fail",{detail:{muted:e.muted,error:a}});}finally{e.attemptingAutoplay=!1;}}return {dispatch:s,ready:o}}function yr({$player:t,$store:e},{$autoplay:r,$poster:n,$loop:s,$controls:o,$playsinline:u,$logLevel:a,$liveEdgeTolerance:c,$minLiveDVRWindow:h}){A(()=>{let f=t();!f||(A(()=>{let m=r();e.autoplay=m,x$1(f,"autoplay-change",{detail:m});}),A(()=>{let m=n();e.poster=m,x$1(f,"poster-change",{detail:m});}),A(()=>{let m=s();e.loop=m,x$1(f,"loop-change",{detail:m});}),A(()=>{let m=o();e.controls=m,x$1(f,"controls-change",{detail:m});}),A(()=>{let m=u();e.playsinline=m,x$1(f,"playsinline-change",{detail:m});}),A(()=>{e.liveEdgeTolerance=c(),e.minLiveDVRWindow=h();}),A(()=>{x$1(f,"live-change",{detail:e.live});}),A(()=>{x$1(f,"live-edge-change",{detail:e.liveEdge});}));});}var Le=class{constructor(){this.H=!1;this.Z=U();this._=new Map;}get te(){return this._.size}get de(){return this.H}async fe(){this.H||await this.Z.promise;}v(e,r){if(this.H){r();return}this._.delete(e),this._.set(e,r);}O(e){this._.get(e)?.(),this._.delete(e);}N(){this.U(),this.H=!0,this._.size>0&&this.U();}G(){this.H=!1;}W(){this.G(),this._.clear(),this.z();}U(){for(let e of this._.keys())this.O(e);this.z();}z(){this.Z.resolve(),this.Z=U();}};function Er({$provider:t,$store:e},r,{$paused:n,$volume:s,$muted:o,$currentTime:u,$playsinline:a}){let c$2=new Le;A(()=>{e.canPlay&&t()?c$2.N():c$2.G();}),A(()=>m(o())),A(()=>h(n())),A(()=>f(s())),A(()=>M(u())),A(()=>b(a()));function h(R){R?c$2.v("paused",r.Y):c$2.v("paused",r.Q);}function f(R){let I=c$1(0,R,1);c$2.v("volume",()=>t().volume=I);}function m(R){c$2.v("muted",()=>t().muted=R);}function M(R){c$2.v("currentTime",()=>{let I=t();R!==I.currentTime&&c(()=>{let p=Math.min(Math.max(e.seekableStart+.1,R),e.seekableEnd-.1);Number.isFinite(p)&&(I.currentTime=p);});});}function b(R){c$2.v("playsinline",()=>t().playsinline=R);}let D={},N={paused:h,muted:m,volume:f,currentTime:M,playsinline:b};for(let R of Object.keys(N))Object.defineProperty(D,R,{get:()=>e[R],set:N[R]});return D}var x={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},vr=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],_r=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],Mr=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"],L=typeof window<"u"&&typeof window.document<"u"?window.document:{},F="fullscreenEnabled"in L&&Object.keys(x)||vr[0]in L&&vr||_r[0]in L&&_r||Mr[0]in L&&Mr||[],cn={requestFullscreen:function(t){return t[F[x.requestFullscreen]]()},requestFullscreenFunction:function(t){return t[F[x.requestFullscreen]]},get exitFullscreen(){return L[F[x.exitFullscreen]].bind(L)},get fullscreenPseudoClass(){return ":"+F[x.fullscreen]},addEventListener:function(t,e,r){return L.addEventListener(F[x[t]],e,r)},removeEventListener:function(t,e,r){return L.removeEventListener(F[x[t]],e,r)},get fullscreenEnabled(){return Boolean(L[F[x.fullscreenEnabled]])},set fullscreenEnabled(t){},get fullscreenElement(){return L[F[x.fullscreenElement]]},set fullscreenElement(t){},get onfullscreenchange(){return L[("on"+F[x.fullscreenchange]).toLowerCase()]},set onfullscreenchange(t){return L[("on"+F[x.fullscreenchange]).toLowerCase()]=t},get onfullscreenerror(){return L[("on"+F[x.fullscreenerror]).toLowerCase()]},set onfullscreenerror(t){return L[("on"+F[x.fullscreenerror]).toLowerCase()]=t}},Q=cn;function Sr(t){let e=j(!1),r=()=>fn(c(t)),n=!1;return A(()=>{let s=t();if(s)return E(Q,"fullscreenchange",async o=>{let u=ct(s);u!==e()&&(u||(n=!1),e.set(u),x$1(s,"fullscreen-change",{detail:u,trigger:o}));}),E(Q,"fullscreenerror",o=>{!n||(x$1(s,"fullscreen-error",{detail:null,trigger:o}),n=!1);}),async()=>{ut()&&await r();}}),{get active(){return e()},get supported(){return ut()},async enter(){try{return n=!0,await dn(c(t))}catch(s){throw n=!1,s}},exit:r}}function ut(){return Q.fullscreenEnabled}function ct(t){if(Q.fullscreenElement===t)return !0;try{return t.matches(Q.fullscreenPseudoClass)}catch{return !1}}async function dn(t){if(!(!t||ct(t)))return br(),Q.requestFullscreen(t)}async function fn(t){if(!(!t||!ct(t)))return br(),Q.exitFullscreen()}function br(){if(!ut())throw Error("[vidstack] no fullscreen API")}var xe=f();function Tr(t){let e=j(kr()),r=j(!1),n;xe&&A(()=>{let u=t();if(!!u)return E(screen.orientation,"change",a=>{let c=kr();e.set(c),x$1(u,"orientation-change",{detail:{orientation:c,lock:n},trigger:a});}),async()=>{xe&&r()&&await o();}});async function s(u){c(r)||(Rr(),await screen.orientation.lock(u),r.set(!0),n=u);}async function o(){!c(r)||(Rr(),n=void 0,await screen.orientation.unlock(),r.set(!1));}return {get orientation(){return e()},get locked(){return r()},get supported(){return xe},lock:s,unlock:o}}function Rr(){if(!!xe)throw Error("[vidstack] no orientation API")}function kr(){return window.screen?.orientation?.type}var Ae=class{constructor(){this._=new Map;}v(e,r){this._.has(e)||this._.set(e,new Set),this._.get(e).add(r);}O(e,r){let n=this._.get(e);if(n)for(let s of n)r(s);this._.delete(e);}J(e){this._.delete(e);}te(e){return this._.get(e)?.size??0}W(){this._.clear();}};var pn=["pointerup","pointermove","focus","keydown","playing"];function wr(t,e){let r,n=2e3,s,o=j(!1),u=j(!1),a=k(()=>u()||e.paused);A(()=>{let h=t();if(!!h)return A(()=>{if(!a())for(let f of pn)E(h,f,c$1);}),A(()=>{window.clearTimeout(r);let f=o()&&!a();e.userIdle=f,x$1(h,"user-idle-change",{detail:f,trigger:s}),s=void 0;}),()=>o.set(!1)});function c$1(h){o()&&(s=h),o.set(!1),window.clearTimeout(r),r=window.setTimeout(()=>o.set(!c(a)),n);}return {idle:{get idling(){return o()},get paused(){return u()},set paused(h){u.set(h);},get delay(){return n},set delay(h){n=h;}}}}function Pr({$player:t,$store:e,$provider:r,logger:n},s,o,u){let a=wr(t,e),c$1=Tr(t),h=Sr(t);A(()=>{a.idle.delay=u.$userIdleDelay();}),A(()=>{let l=h.supported||r()?.fullscreen?.supported||!1;e.canLoad&&c(()=>e.canFullscreen)===l||(e.canFullscreen=l);});let m={"media-start-loading":M,"media-mute-request":b,"media-unmute-request":D,"media-play-request":N,"media-pause-request":R,"media-seeking-request":I,"media-seek-request":p$1,"media-live-edge-request":k,"media-volume-change-request":$,"media-enter-fullscreen-request":P,"media-exit-fullscreen-request":q,"media-resume-user-idle-request":ee,"media-pause-user-idle-request":De,"media-show-poster-request":Ne,"media-hide-poster-request":Ie,"media-loop-request":qe};A(()=>{let l=t();if(!!l)for(let y of Q$1(m)){let w=m[y];E(l,y,Y=>{Y.stopPropagation(),c(r)&&w(Y);});}});function M(l){e.canLoad||(o._.v("load",l),s.handle(w$1(t,"can-load")));}function b(l){e.muted||(o._.v("volume",l),r().muted=!0);}function D(l){!e.muted||(o._.v("volume",l),r().muted=!1,e.volume===0&&(o._.v("volume",l),r().volume=.25));}async function N(l){if(!!e.paused)try{o._.v("play",l),await r().play();}catch(y){let w=w$1(t,"play-fail",{detail:me(y)});s.handle(w);}}async function R(l){if(!e.paused)try{o._.v("pause",l),await r().pause();}catch{o._.J("pause");}}function I(l){o._.v("seeking",l),e.seeking=!0,o.R.set(!0);}function p$1(l){e.ended&&o.V.set(!0),o.R.set(!1),o._.J("seeking");let y=Math.min(Math.max(e.seekableStart+.1,l.detail),e.seekableEnd-.1);!Number.isFinite(y)||!e.canSeek||(o._.v("seeked",l),r().currentTime=y,e.live&&l.isOriginTrusted&&Math.abs(e.seekableEnd-y)>=2&&(e.userBehindLiveEdge=!0));}function k(l){if(!(!e.live||e.liveEdge||!e.canSeek)){o._.v("seeked",l);try{ve();}catch{}}}function $(l){let y=l.detail;e.volume!==y&&(o._.v("volume",l),r().volume=y,y>0&&e.muted&&(o._.v("volume",l),r().muted=!1));}async function P(l){try{o._.v("fullscreen",l),await ye(l.detail);}catch(y){let w=w$1(t,"fullscreen-error",{detail:me(y)});s.handle(w);}}async function q(l){try{o._.v("fullscreen",l),await Ee(l.detail);}catch(y){let w=w$1(t,"fullscreen-error",{detail:me(y)});s.handle(w);}}function ee(l){o._.v("userIdle",l),a.idle.paused=!1;}function De(l){o._.v("userIdle",l),a.idle.paused=!0;}function Ne(l){e.canLoadPoster=!0;}function Ie(l){e.canLoadPoster=!1;}function qe(l){window.requestAnimationFrame(async()=>{try{o.L.set(!0),o.V.set(!0),await ge();}catch{o.L.set(!1),o.V.set(!1);}});}function ae(l,y){if(!y?.supported)throw Error("[vidstack] no fullscreen support")}async function ge(){if(!!e.paused)try{let l=c(r);return dt(l,t),c(()=>e.ended)&&(l.currentTime=e.seekableStart+.1),l.play()}catch(l){let y=w$1(t,"play-fail",{detail:me(l)});throw y.autoplay=e.attemptingAutoplay,s.handle(y),l}}async function Ve(){if(e.paused)return;let l=c(r);return dt(l,t),l.pause()}async function ye(l="prefer-media"){let y=c(r),w=l==="prefer-media"&&h.supported||l==="media"?h:y?.fullscreen;if(ae(l,w),w.active)return;let Y=c(u.$fullscreenOrientation);return c$1.supported&&!p(Y)&&await c$1.lock(Y),w.enter()}async function Ee(l="prefer-media"){let y=c(r),w=l==="prefer-media"&&h.supported||l==="media"?h:y?.fullscreen;if(ae(l,w),!!w.active)return c$1.locked&&await c$1.unlock(),w.exit()}function ve(){if(e.userBehindLiveEdge=!1,c(()=>!e.live||e.liveEdge||!e.canSeek))return;let l=c(r);dt(l,t),l.currentTime=e.liveSyncPosition??e.seekableEnd-2;}return {re:a,oe:c$1,Q:ge,Y:Ve,ie:ye,ae:Ee,ne:ve}}function dt(t,e){if(!(t&&c(()=>e()?.state.canPlay)))throw Error("[vidstack] media not ready")}var Oe=class{constructor(){this._=new Ae;this.R=j(!1);this.L=j(!1);this.V=j(!1);}};var $r=mn;function mn(t,e,r){var n=null,s=null,o=function(){n&&(clearTimeout(n),s=null,n=null);},u=function(){var c=s;o(),c&&c();},a=function(){if(!e)return t.apply(this,arguments);var c=this,h=arguments,f=r&&!n;if(o(),s=function(){t.apply(c,h);},n=setTimeout(function(){if(n=null,!f){var m=s;return s=null,m()}},e),f)return s()};return a.cancel=o,a.flush=u,a}var hn=new Set(["autoplay","autoplay-fail","can-load","sources-change","source-change","load-start","abort","error","loaded-metadata","loaded-data","can-play","play","play-fail","pause","playing","seeking","seeked","waiting"]);function Cr({$player:t,$loader:e,$provider:r,$store:n,logger:s},o){let u=O(),a=new Map,c=!0,h,f=!1,m;X(()=>{t()?.setAttribute("aria-busy","true");}),A(()=>{let i=t();!i||(E(i,"fullscreen-change",mt),E(i,"fullscreen-error",ht));}),A(()=>{r()||(b(),lt(n),u.empty(),o._.W(),c=!0);});let M={"provider-loader-change":D,"provider-change":N,autoplay:ye,"autoplay-fail":Ee,"can-load":p,"can-play-through":qe,"can-play":Ie,"duration-change":ge,"load-start":q,"loaded-data":Ne,"loaded-metadata":De,"media-type-change":R,"stream-type-change":I,"play-fail":l,"source-change":$,"sources-change":k,"time-update":qr,"volume-change":Vr,"fullscreen-change":mt,"fullscreen-error":ht,abort:P,ended:Ur,error:ee,pause:Y,play:ve,playing:y,progress:Ve,seeked:jr,seeking:lr(Hr,150,{leading:!0}),waiting:Kr};function b(){pt(),o.V.set(!1),o.L.set(!1),f=!1,m=void 0,a.clear();}function D(i){e.set(i.detail);}function N(i){r.set(i.detail);}function R(i){D$1(i,a.get("source-change"));let S=n.viewType;n.mediaType=i.detail,S!==n.viewType&&setTimeout(()=>t()?.dispatchEvent(w$1(t,"view-type-change",{detail:n.viewType,trigger:i})),0);}function I(i){D$1(i,a.get("source-change")),n.inferredStreamType=i.detail,i.detail=n.streamType;}function p(i){n.canLoad=!0,a.set("can-load",i),j("load",i);}function k(i){n.sources=i.detail;}function $(i){if(D$1(i,a.get("sources-change")),n.source=i.detail,t()?.setAttribute("aria-busy","true"),c){c=!1;return}b(),lt(n),a.set(i.type,i);}function P(i){D$1(i,a.get("source-change")),D$1(i,a.get("can-load"));}function q(i){D$1(i,a.get("source-change"));}function ee(i){n.error=i.detail,D$1(i,a.get("abort"));}function De(i){D$1(i,a.get("load-start"));}function Ne(i){D$1(i,a.get("load-start"));}function Ie(i){i.trigger?.type!=="loadedmetadata"&&D$1(i,a.get("loaded-metadata")),ae(i.detail),t()?.setAttribute("aria-busy","false");}function qe(i){ae(i.detail),D$1(i,a.get("can-play"));}function ae({buffered:i,seekable:S}){n.seekable=S,n.buffered=i,n.duration=n.seekableEnd,n.canPlay=!0;}function ge(i){let S=i.detail;n.live||(n.duration=Number.isNaN(S)?0:S);}function Ve(i){let{buffered:S,seekable:te}=i.detail;n.buffered=S,n.seekable=te,n.live&&(n.duration=n.seekableEnd,x$1(t(),"duration-change",{detail:n.seekableEnd,trigger:i}));}function ye(i){D$1(i,a.get("play")),D$1(i,a.get("can-play")),n.autoplayError=void 0;}function Ee(i){D$1(i,a.get("play-fail")),D$1(i,a.get("can-play")),n.autoplayError=i.detail,b();}function ve(i){if(i.autoplay=n.attemptingAutoplay,o.L()||!n.paused){i.stopImmediatePropagation();return}D$1(i,a.get("waiting")),j("play",i),n.paused=!1,n.autoplayError=void 0,(n.ended||o.V())&&(o.V.set(!1),n.ended=!1,He(w$1(t,"replay",{trigger:i})));}function l(i){D$1(i,a.get("play")),j("play",i),n.paused=!0,n.playing=!1,b();}function y(i){let S=a.get("play");if(S?(D$1(i,a.get("waiting")),D$1(i,S)):D$1(i,a.get("seeked")),setTimeout(()=>b(),0),n.paused=!1,n.playing=!0,n.seeking=!1,n.ended=!1,o.L()){i.stopImmediatePropagation(),o.L.set(!1);return}w(i);}function w(i){if(!n.started){if(n.live){let S=n.liveSyncPosition??n.seekableEnd-2;Number.isFinite(S)&&(r().currentTime=S);}n.started=!0,He(w$1(t,"started",{trigger:i}));}}function Y(i){if(o.L()){i.stopImmediatePropagation();return}D$1(i,a.get("seeked")),j("pause",i),n.paused=!0,n.playing=!1,n.seeking=!1,b();}function qr(i){let{currentTime:S,played:te}=i.detail;n.currentTime=S,n.played=te,n.waiting=!1;}function Vr(i){n.volume=i.detail.volume,n.muted=i.detail.muted||i.detail.volume===0,j("volume",i);}function Hr(i){n.seeking=!0,n.currentTime=i.detail,j("seeking",i);}function jr(i){if(o.R())n.seeking=!0,i.stopImmediatePropagation();else if(n.seeking){D$1(i,a.get("waiting")),D$1(i,a.get("seeking")),n.paused&&pt(),n.seeking=!1,i.detail!==n.duration&&(n.ended=!1),n.currentTime=i.detail,j("seeked",i);let S=i.originEvent;S&&S.isTrusted&&!/seek/.test(S.type)&&w(i);}}h=$r(()=>{if(!m)return;f=!0,n.waiting=!0,n.playing=!1;let i=w$1(t,"waiting",{trigger:m});a.set("waiting",i),t()?.dispatchEvent(i),m=void 0,f=!1;},300);function Kr(i){f||o.R()||(i.stopImmediatePropagation(),m=i,h());}function Ur(i){if(o.L()){i.stopImmediatePropagation();return}n.paused=!0,n.playing=!1,n.seeking=!1,n.ended=!0,b();}function pt(){h?.cancel(),n.waiting=!1;}function mt(i){n.fullscreen=i.detail,j("fullscreen",i);}function ht(i){j("fullscreen",i);}function j(i,S){o._.O(i,te=>{S.request=te,D$1(S,te);});}function He(i){M[i.type]?.(i),hn.has(i.type)&&a.set(i.type,i),t()?.dispatchEvent(i);}return {handle:He}}function Lr(t){let e={$player:j(null),$loader:j(null),$provider:j(null),$store:at.create()};E$1(nt,e),e.remote=new $e(void 0);let r=e.$store,n=new Oe,s=Cr(e,n),o=Pr(e,s,n,t),u=gr(e,s.handle),a=Er(e,o,t);e.delegate=u;let c={viewType:"providedViewType",streamType:"providedStreamType"};for(let f of Object.keys(t)){let m=f.slice(1);m in r&&(r[c[m]??m]=t[f]());}A(()=>{r.providedViewType=t.$viewType(),r.providedStreamType=t.$streamType();}),r.muted=t.$muted()||t.$volume()===0,yr(e,t),hr(e.$player,t.$load,h);function h(){u.dispatch("can-load");}return {X:e,N:h,S:o,le:a}}var gn=de('<audio preload="none"></audio>'),yn=gn,Fe=class{canPlay({src:e,type:r}){return t(e)?i$1.test(e)||j$1.has(r)||e.startsWith("blob:")&&r==="audio/object":r==="audio/object"}mediaType(){return "audio"}async load(){return new(await import('./provider-IX5UC3LP.js')).AudioProvider(this.ee)}render(e){let r=()=>e.controls;return (()=>{let n=fe(yn);return oe(()=>ie(n,"controls",r())),pe(n,s=>void(this.ee=s)),n})()}};var En=de('<video preload="none"></video>'),vn=En,se=class{canPlay(e){return t(e.src)?k$1.test(e.src)||l$2.has(e.type)||e.src.startsWith("blob:")&&e.type==="video/object"||o$1(e)&&g$2():e.type==="video/object"}mediaType(){return "video"}async load(e){return new(await import('./provider-XIO6PV5E.js')).VideoProvider(this.I,e)}render(e){let r=()=>e.controls,n=()=>e.poster&&e.canLoadPoster===!0?e.poster:null;return (()=>{let s=fe(vn);return oe(()=>ie(s,"controls",r())),oe(()=>ie(s,"poster",n())),pe(s,o=>void(this.I=o)),s})()}};var ft=class extends se{preconnect(){ke("https://cdn.jsdelivr.net","preconnect");}canPlay({src:e,type:r}){return ft.supported&&t(e)&&(m$1.test(e)||n$1.has(r))}async load(e){return new(await import('./provider-TL5KUVHV.js')).HLSProvider(this.I,e)}},he=ft;he.supported=h();function xr(t$1,e,r){let{$loader:n,$store:s,delegate:o}=r,u=new he,a=new se,c$1=new Fe,h=k(()=>e()?[a,c$1,u]:[u,a,c$1]);A(()=>{o.dispatch("sources-change",{detail:_n(t$1())});}),A(()=>{let f=s.sources,m=c(()=>s.source),M={src:"",type:""},b=null;for(let D of f){let N=c(h).find(R=>R.canPlay(D));N&&(M=D,b=N);}(M.src!==m.src||M.type!==m.type)&&(o.dispatch("source-change",{detail:M}),o.dispatch("media-type-change",{detail:b?.mediaType(M)||"unknown"})),b!==c(n)&&(o.dispatch("provider-change",{detail:null}),b&&c(()=>b.preconnect?.(r)),o.dispatch("provider-loader-change",{detail:b})),e$1();}),A(()=>{let f=r.$provider();if(!!f){if(r.$store.canLoad){c(()=>f.setup({...r,player:r.$player()}));return}c(()=>f.preconnect?.(r));}}),A(()=>{let f=r.$provider(),m=r.$store.source;if(r.$store.canLoad){c(()=>f?.loadSource(m,c(()=>r.$store.preload)));return}try{t(m.src)&&ke(new URL(m.src).origin,"preconnect");}catch{}});}function _n(t$1){return (w(t$1)?t$1:[!t(t$1)&&"src"in t$1?t$1:{src:t$1}]).map(({src:e,type:r})=>({src:e,type:r??(!t(e)||e.startsWith("blob:")?"video/object":"?")}))}var Fr={togglePaused:"k Space",toggleMuted:"m",toggleFullscreen:"f",seekBackward:"ArrowLeft",seekForward:"ArrowRight",volumeUp:"ArrowUp",volumeDown:"ArrowDown"},Ar=new Set(["Shift","Alt","Meta","Control"]),Mn='button, [role="button"]',Or='video, input, textarea, select, [contenteditable], [role^="menuitem"]';function Dr({$player:t,$store:e,ariaKeys:r,remote:n},{$keyShortcuts:s,$keyDisabled:o,$keyTarget:u}){A(()=>{let a=t();if(!a||o())return;let c=u()==="player"?a:document,h=j(!1);c===a?(E(a,"focusin",()=>h.set(!0)),E(a,"focusout",p=>{a.contains(p.target)||h.set(!1);})):E(document,"focusin",p=>{let k=p.composedPath().find($=>$ instanceof Element&&$.localName==="media-player");k!==void 0&&h.set(a===k);}),A(()=>{!h()||(E(c,"keyup",N),E(c,"keydown",R));});let f;function m(p,k){let $=p.shiftKey?10:5;return f=Math.max(0,Math.min((f??e.currentTime)+(k==="seekForward"?+$:-$),e.duration))}let M=null;function b(p){M?.dispatchEvent(new v$1(p.type,{trigger:p}));}function D(p,k){!e.canSeek||(M||(M=a.querySelector("media-time-slider")),M?b(p):n.seeking(m(p,k),p));}function N(p){let k=document.activeElement,$=k?.hasAttribute("data-media-slider");if(!p.key||!e.canSeek||$||k?.matches(Or))return;let P=I(p);P?.startsWith("seek")&&(p.preventDefault(),M?(b(p),M=null):(n.seek(m(p,P),p),f=0)),P?.startsWith("volume")&&a.querySelector("media-volume-slider")?.dispatchEvent(new v$1("keyup",{trigger:p}));}function R(p){if(!p.key||Ar.has(p.key))return;let k=document.activeElement;if(k?.matches(Or)||L$1(p)&&k?.matches(Mn))return;let $=k?.hasAttribute("data-media-slider"),P=I(p);if(!P&&/[0-9]/.test(p.key)&&!$){p.preventDefault(),n.seek(e.duration/10*Number(p.key),p);return}if(!(!P||/volume|seek/.test(P)&&$))switch(p.preventDefault(),P){case"seekForward":case"seekBackward":D(p,P);break;case"volumeUp":case"volumeDown":let q=a.querySelector("media-volume-slider");if(q)q.dispatchEvent(new v$1("keydown",{trigger:p}));else {let ee=p.shiftKey?.1:.05;n.changeVolume(e.volume+(P==="volumeUp"?+ee:-ee),p);}break;case"toggleFullscreen":n.toggleFullscreen("prefer-media",p);default:n[P]?.(p);}}function I(p){let k={...s(),...r};return Object.keys(k).find($=>k[$].split(" ").some(P=>bn(P).replace(/Control/g,"Ctrl").split("+").every(q=>Ar.has(q)?p[q.toLowerCase()+"Key"]:p.key===q.replace("Space"," "))))}});}function Ds(t,e){X(()=>{let{$keyShortcuts:r,ariaKeys:n}=dr(),s=t.el.getAttribute("aria-keyshortcuts");if(s){n[e]=s,h$1(()=>{delete n[e];});return}let o=r()[e];o&&t.el.setAttribute("aria-keyshortcuts",o);});}var Sn=["!","@","#","$","%","^","&","*","(",")"];function bn(t){return t.replace(/Shift\+(\d)/g,(e,r)=>Sn[r-1])}var Nr={autoplay:{initial:!1},aspectRatio:{initial:null,type:{from(t){if(!t)return null;let[e,r]=t.split("/").map(Number);return +(e/r).toFixed(4)}}},controls:{initial:!1},currentTime:{initial:0},fullscreenOrientation:{},load:{initial:"visible"},logLevel:{initial:"silent"},loop:{initial:!1},muted:{initial:!1},paused:{initial:!0},playsinline:{initial:!1},poster:{initial:""},preload:{initial:"metadata"},preferNativeHLS:{initial:!1,attribute:"prefer-native-hls"},src:{initial:""},userIdleDelay:{initial:2e3},viewType:{initial:"unknown"},streamType:{initial:"unknown"},volume:{initial:1},liveEdgeTolerance:{initial:10},minLiveDVRWindow:{initial:60},keyDisabled:{initial:!1},keyTarget:{initial:"player"},keyShortcuts:{initial:Fr}};var Rn=["autoplay","autoplayError","canFullscreen","canLoad","canPlay","canSeek","ended","error","fullscreen","loop","live","liveEdge","mediaType","muted","paused","playing","playsinline","seeking","started","streamType","userIdle","viewType","waiting"],Ir=Symbol(0),Gs=tt({tagName:"media-player",props:Nr,construct(){this[Ir]=j([]);let t=this.addEventListener;this.addEventListener=function(e,r,n){return e.startsWith("hls-")&&this[Ir].set(s=>[...s,e]),t.call(this,e,r,n)};},setup({host:t,props:e,accessors:r}){let n$1=f$2(),s=Lr(e),o$1=s.X,u=o$1.$store;X(()=>{t.el.setAttribute("tabindex","0"),t.el.hasAttribute("aria-label")||t.el.setAttribute("aria-label","Media Player"),o$1.$player.set(t.el),o$1.remote.setTarget(t.el),o$1.remote.setPlayer(t.el),E(t.el,"find-media-player",({detail:c})=>c(t.el));}),Z(()=>{x$1(t.el,"media-player-connect",{detail:t.el,bubbles:!0,composed:!0}),window.requestAnimationFrame(()=>{o(u.canLoadPoster)&&(u.canLoadPoster=!0);});}),o$1.ariaKeys={},o$1.$keyShortcuts=e.$keyShortcuts,Dr(o$1,e),cr(t.$el),xr(e.$src,e.$preferNativeHLS,s.X);let a={"aspect-ratio":e.$aspectRatio,"data-ios-controls":()=>d&&u.mediaType==="video"&&u.controls&&(!e.$playsinline()||u.fullscreen)};for(let c of Rn)a["data-"+m(c)]=()=>u[c];return t.setAttributes(a),t.setCSSVars({"--media-aspect-ratio":()=>{let c=e.$aspectRatio();return c?+c.toFixed(4):null},"--media-buffered":()=>+u.bufferedEnd.toFixed(3),"--media-current-time":()=>+u.currentTime.toFixed(3),"--media-duration":()=>Number.isFinite(u.duration)?+u.duration.toFixed(3):0}),h$1(()=>{x$1(t.el,"destroy");}),R({get user(){return s.S.re},get orientation(){return s.S.oe},get provider(){return o$1.$provider()},get $store(){return u},state:new Proxy(u,{set:n}),subscribe:c=>g(()=>A(()=>c(u)),n$1),startLoading:s.N,play:s.S.Q,pause:s.S.Y,seekToLiveEdge:s.S.ne,enterFullscreen:s.S.ie,exitFullscreen:s.S.ae},r(),s.le)}});/**
 * The code below this comment was adapted from Lit: https://github.dev/lit/lit
 *
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */

export { de as a, fe as b, Jr as c, Xr as d, pe as e, ie as f, Zr as g, en as h, oe as i, tt as j, X as k, Z as l, sn as m, cr as n, dr as o, $e as p, me as q, lr as r, ke as s, wn as t, Ds as u, Ir as v, Gs as w };
